<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detective KIVA</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@500;700&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #e0f2f1; --card: #fff; --text: #004d40; --primary: #00897b; }
        [data-theme="dark"] { --bg: #0f172a; --card: #1e293b; --text: #ccfbf1; --primary: #2dd4bf; }
        
        body { font-family: 'Nunito'; background: var(--bg); color: var(--text); padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; transition: background 0.3s; }
        .theme-btn { position: absolute; top: 20px; right: 20px; font-size: 1.5rem; background:none; border:none; cursor:pointer; }
        
        .card { background: var(--card); padding: 30px; border-radius: 20px; width: 100%; max-width: 600px; text-align: center; position: relative; overflow: hidden; min-height: 500px; display: flex; flex-direction: column; justify-content: center; }
        
        .opt { background: rgba(0,0,0,0.05); border: 2px solid rgba(0,0,0,0.1); padding: 15px; border-radius: 12px; cursor: pointer; margin-bottom: 10px; font-weight: bold; color: var(--text); }
        .opt:hover { border-color: var(--primary); }
        .opt.correct { background: #c8e6c9; border-color: #2e7d32; color: #1b5e20; }
        .opt.wrong { background: #ffcdd2; border-color: #c62828; }
        
        .overlay { position: absolute; inset: 0; background: var(--card); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; opacity: 0; pointer-events: none; transition: 0.3s; }
        .overlay.active { opacity: 1; pointer-events: all; }
        
        .scroll-txt { max-height: 150px; overflow-y: auto; background: rgba(0,0,0,0.03); padding: 10px; border-radius: 10px; margin: 15px 0; width: 100%; }
        .btn { padding: 10px 25px; border-radius: 20px; border: none; background: var(--primary); color: #fff; cursor: pointer; font-weight: bold; }
        .btn-out { background: transparent; border: 2px solid #ccc; color: #888; margin-top: 10px; }
    </style>
</head>
<body>
    <button id="themeToggle" class="theme-btn">üåô</button>
    <h1>Detective KIVA</h1>
    
    <div class="card">
        <div class="overlay" id="feedback">
            <h2 id="fbTitle">¬°Correcto!</h2>
            <div class="scroll-txt"><p id="fbText"></p></div>
            <button class="btn" onclick="next()">Siguiente</button>
        </div>
        
        <div class="overlay" id="end">
            <h2>¬°Caso Resuelto!</h2>
            <p>Eres un experto en seguridad.</p>
            <button class="btn btn-out" onclick="window.location.href='index.html'">Salir</button>
        </div>

        <div style="font-size:3rem">üîç</div>
        <p id="qText" style="font-weight:bold; font-size:1.2rem; margin-bottom:20px">...</p>
        <div id="opts"></div>
        <button class="btn btn-out" onclick="window.location.href='index.html'" style="margin-top:auto">Salir</button>
    </div>

    <script>
        // Tema
        const tBtn = document.getElementById('themeToggle');
        if(localStorage.getItem('theme') === 'dark'){ document.body.setAttribute('data-theme','dark'); tBtn.textContent='‚òÄÔ∏è'; }
        tBtn.addEventListener('click', ()=>{
            const isDark = document.body.getAttribute('data-theme')==='dark';
            document.body.setAttribute('data-theme', isDark ? '' : 'dark');
            localStorage.setItem('theme', isDark ? 'light' : 'dark');
            tBtn.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
        });

        const qs = [
            {q:"Si te sientes mal en la panza por un secreto, ¬øqu√© es?", o:["Juguete","Secreto Malo","Comida"], c:1, f:"¬°Exacto! Los secretos malos te hacen sentir mal. ¬°Cu√©ntalos!"},
            {q:"Te escucha, te cree y te protege. ¬øQui√©n es?", o:["Adulto de Confianza","Desconocido","Amigo"], c:0, f:"¬°S√≠! Busca siempre a un adulto de confianza."},
            {q:"Palabra de 2 letras que es tu escudo.", o:["SI","HOLA","NO"], c:2, f:"¬°NO! Tienes derecho a decir NO si algo no te gusta."}
        ];
        let curr = 0;

        function load() {
            if(curr>=qs.length){ document.getElementById('end').classList.add('active'); return; }
            document.getElementById('feedback').classList.remove('active');
            const d = qs[curr];
            document.getElementById('qText').textContent = d.q;
            const c = document.getElementById('opts'); c.innerHTML = '';
            d.o.forEach((op,i) => {
                const b = document.createElement('div'); b.className='opt'; b.textContent=op;
                b.onclick = () => check(i, b);
                c.appendChild(b);
            });
        }

        function check(i, btn) {
            const d = qs[curr];
            if(i===d.c) { btn.classList.add('correct'); document.getElementById('fbTitle').textContent="¬°Bien!"; }
            else { btn.classList.add('wrong'); document.getElementById('fbTitle').textContent="Casi..."; }
            document.getElementById('fbText').textContent = d.f;
            setTimeout(()=>document.getElementById('feedback').classList.add('active'), 600);
        }
        function next(){ curr++; load(); }
        load();
    </script>
</body>
</html>